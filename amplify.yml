version: 1
frontend:
  phases:
    preBuild:
      commands:
        - cd frontend
        - echo "ğŸ”§ Configurando ambiente..."
        - node --version
        - npm --version
        - echo "ğŸ“¦ Instalando dependÃªncias..."
        - npm install
    build:
      commands:
        - echo "ğŸ—ï¸ Building aplicaÃ§Ã£o..."
        - npm run build
        - echo "âœ… Build concluÃ­do"
    postBuild:
      commands:
        - echo "ğŸ“‹ Verificando build..."
        - ls -la out/
        - echo "ğŸ‰ Deploy pronto!"
  artifacts:
    baseDirectory: frontend/out
    files:
      - '**/*'
  cache:
    paths:
      - frontend/node_modules/**/*
      - frontend/.next/cache/**/*
backend:
  phases:
    preBuild:
      commands:
        - cd backend
        - echo "ğŸ“¦ Instalando dependÃªncias do backend..."
        - npm install
    build:
      commands:
        - echo "ğŸ—ï¸ Building backend..."
        - npm run build
        - echo "âœ… Backend build concluÃ­do"
  artifacts:
    baseDirectory: backend/dist
    files:
      - '**/*'
  cache:
    paths:
      - backend/node_modules/**/*
