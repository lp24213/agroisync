# CONFIGURA√á√ÉO AMPLIFY BACKEND - AGROISYNC.COM
version: 1
applications:
  - appRoot: .
    env:
      variables:
        NODE_ENV: production
        PORT: 3001
        ALLOWED_ORIGINS: https://agroisync.com,https://www.agroisync.com,https://api.agroisync.com
        FIREBASE_ADMIN_PROJECT_ID: agroisync-95542
        FIREBASE_ADMIN_CLIENT_EMAIL: firebase-adminsdk-xxxxx@agroisync-95542.iam.gserviceaccount.com
        FIREBASE_ADMIN_PRIVATE_KEY: "-----BEGIN PRIVATE KEY-----\nXXXXX\n-----END PRIVATE KEY-----\n"
        FIREBASE_ADMIN_CLIENT_X509_CERT_URL: https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-xxxxx%40agroisync-95542.iam.gserviceaccount.com
        FIREBASE_DATABASE_URL: https://agroisync-95542-default-rtdb.asia-southeast1.firebasedatabase.app
        FIREBASE_STORAGE_BUCKET: agroisync-95542.firebasestorage.app
        MONGODB_URI: mongodb+srv://username:password@cluster.mongodb.net/agroisync?retryWrites=true&w=majority
        JWT_SECRET: agroisync-super-secret-jwt-key-2024
        COINMARKETCAP_API_KEY: your-coinmarketcap-api-key
        SOLANA_RPC_URL: https://api.mainnet-beta.solana.com
        ETHEREUM_RPC_URL: https://mainnet.infura.io/v3/your-project-id
    backend:
      phases:
        preBuild:
          commands:
            - echo "üöÄ INICIANDO BUILD BACKEND AGROISYNC.COM"
            - echo "üì¶ Instalando depend√™ncias..."
            - npm ci --no-audit --prefer-offline --legacy-peer-deps
            - echo "‚úÖ Depend√™ncias instaladas com sucesso!"
        build:
          commands:
            - echo "üî® Verificando configura√ß√£o..."
            - node -e "console.log('‚úÖ Node.js funcionando:', process.version)"
            - echo "‚úÖ Build backend conclu√≠do!"
        postBuild:
          commands:
            - echo "üìÅ Verificando arquivos..."
            - ls -la
            - echo "üéâ BACKEND AGROISYNC.COM CONCLU√çDO!"
      artifacts:
        baseDirectory: .
        files:
          - '**/*'
          - '!node_modules/**'
          - '!tests/**'
          - '!docs/**'
      cache:
        paths:
          - node_modules/**
          - ~/.npm/**
          - ~/.cache/**
