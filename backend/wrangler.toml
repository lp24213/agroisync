name = "agroisync-backend"
main = "src/universal-working-worker.js"
compatibility_date = "2024-09-01"

# Configuração para Cloudflare Workers
compatibility_flags = ["nodejs_compat"]

# Cloudflare D1 Database
[[d1_databases]]
binding = "DB"
database_name = "agroisync-db"
database_id = "a3eb1069-9c36-4689-9ee9-971245cb2d12"

# Variáveis de ambiente
[vars]
NODE_ENV = "production"
API_VERSION = "v1"
# Email - Resend
RESEND_API_KEY = "re_f9XgEUAJ_2FwkAe87mmUZJhTTAy8xuWg8"
RESEND_FROM = "Agroisync <contato@agroisync.com>"
# Cloudflare Turnstile
CLOUDFLARE_TURNSTILE_SECRET = "0x4AAAAAAB3pdkPMyeyfUQQaEpNBMb0NYhk"
NEXT_PUBLIC_CLOUDFLARE_TURNSTILE_SITE_KEY = "0x4AAAAAAB3pdjs4jRKvAtaA"
FRONTEND_URL = "https://agroisync.com"
# Admin Configuration (SECURITY: Use strong password)
ADMIN_EMAIL = "admin@agroisync.com"
ADMIN_PASSWORD = "AgroSync2024!@#SecureAdmin"

# Rotas do Worker servindo sob o domínio principal
[[routes]]
pattern = "agroisync.com/api/*"
zone_name = "agroisync.com"

[[routes]]
pattern = "www.agroisync.com/api/*"
zone_name = "agroisync.com"

[[routes]]
pattern = "agroisync.com/payment/*"
zone_name = "agroisync.com"

[[routes]]
pattern = "www.agroisync.com/payment/*"
zone_name = "agroisync.com"

[[routes]]
pattern = "agroisync.com/public/*"
zone_name = "agroisync.com"

[[routes]]
pattern = "www.agroisync.com/public/*"
zone_name = "agroisync.com"

# Secrets (configure via wrangler secret put)
# STRIPE_SECRET_KEY
# STRIPE_WEBHOOK_SECRET
# JWT_SECRET
