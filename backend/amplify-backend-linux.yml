version: 1
backend:
  phases:
    preBuild:
      commands:
        - echo "ğŸš€ Iniciando build do AGROISYNC Backend no Linux..."
        - echo "ğŸ“‹ InformaÃ§Ãµes do sistema:"
        - uname -a
        - echo "ğŸ“‹ VersÃµes do ambiente:"
        - node --version
        - npm --version
        - echo "ğŸ“‹ DiretÃ³rio atual:"
        - pwd
        - echo "ğŸ“¦ Instalando dependÃªncias..."
        - npm ci
        - echo "ğŸ”§ ConfiguraÃ§Ãµes aplicadas com sucesso"
        - echo "ğŸ“ Estrutura atual:"
        - ls -la
    build:
      commands:
        - echo "ğŸ—ï¸ Buildando aplicaÃ§Ã£o..."
        - npm run build
        - echo "ğŸ“ Verificando estrutura apÃ³s build..."
        - pwd
        - ls -la
        - echo "ğŸ“ Verificando arquivos de build..."
        - ls -la dist/ || echo "Pasta dist nÃ£o encontrada"
        - echo "âœ… Build concluÃ­do com sucesso!"
        - echo "ğŸ¯ Backend pronto para deploy no Amplify!"
  artifacts:
    baseDirectory: .
    files:
      - '**/*'
      - '!node_modules/**/*'
      - '!tests/**/*'
      - '!coverage/**/*'
      - '!.git/**/*'
  cache:
    paths:
      - node_modules/**/*
