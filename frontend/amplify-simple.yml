version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "ğŸš€ Iniciando build do AGROISYNC Frontend..."
        - node --version
        - npm --version
        - echo "ğŸ“¦ Instalando dependÃªncias..."
        - npm ci
        - echo "âš™ï¸ Configurando para Amplify..."
        - cp next.config-amplify.js next.config.js
        - cp tsconfig-amplify.json tsconfig.json
    build:
      commands:
        - echo "ğŸ—ï¸ Buildando aplicaÃ§Ã£o..."
        - npm run build
        - echo "ğŸ“ Verificando estrutura de arquivos..."
        - ls -la
        - echo "ğŸ“ Verificando pasta out..."
        - ls -la out/
        - echo "ğŸ“ Verificando pasta .next..."
        - ls -la .next/
        - echo "âœ… Build concluÃ­do!"
  artifacts:
    baseDirectory: out
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
      - .next/cache/**/*
